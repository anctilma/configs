set nocompatible
" source $VIMRUNTIME/vimrc_example.vim
" source $VIMRUNTIME/mswin.vim
" behave mswin

" my plugins here:
call plug#begin('~/vimfiles/plugged')

Plug 'scrooloose/nerdtree'
Plug 'bling/vim-airline'
Plug 'kien/ctrlp.vim'
Plug 'FelikZ/ctrlp-py-matcher'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-obsession'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-vinegar'
Plug 'tpope/vim-dispatch'

Plug 'tpope/vim-abolish'
Plug 'tpope/vim-unimpaired'
Plug 'scrooloose/syntastic'
Plug 'terryma/vim-multiple-cursors'
Plug 'terryma/vim-expand-region'
Plug 'Lokaltog/vim-easymotion'
Plug 'godlygeek/tabular'
Plug 'rking/ag.vim'
Plug 'majutsushi/tagbar'
Plug 'ervandew/supertab'
Plug 'Shougo/vimshell.vim'
Plug 'Shougo/vimproc.vim'
Plug 'sjl/gundo.vim'
Plug 'will133/vim-dirdiff'
"Plug 'airblade/vim-gitgutter'

" Plugins for snippets support
Plug 'sirver/ultisnips'
Plug 'tomtom/tlib_vim'
Plug 'MarcWeber/vim-addon-mw-utils'
Plug 'garbas/vim-snipmate'
Plug 'honza/vim-snippets'
Plug 'alvan/vim-closetag'

" on demand plugins example.
"Plug 'scrooloose/nerdtree', {'on': 'NERDTreeToggle'}

call plug#end()

" map leader key to comma
let mapleader = ","

" map F12 to toggle NERDTree
noremap <silent> <F12> :NERDTreeToggle<CR>

" map F10 to toggle whitespace detection
noremap <silent> <F10> :AirlineToggleWhitespace<CR>:SyntasticToggleMode<CR>

" map F9 to toggle tag bar
noremap <silent> <F9> :TagbarToggle<CR>

" map F5 to toggle gundo
nnoremap <silent> <F5> :GundoToggle<CR>

" otherwise, use cscope for navigation
set cscopetag

" change de default comment style to c++ for c++ files
autocmd FileType cpp,cs setlocal commentstring=//\ %s

" enable closetag for xml,html,htm,xhtml and ndb files.
let g:closetag_filenames = "*.xml,*.html,*.htm,*.xhtml,*.ndb,*.2db,*.config,*.rss"

" You complete me configuration
let g:ycm_show_diagnostics_ui = 0

" always display airline
set laststatus=2
" enable the tabline
let g:airline#extensions#tabline#enabled = 1
" show only the file name
let g:airline#extensions#tabline#fnamemod = ':t'
" set jellybeans theme for airline
let g:airline_theme = 'jellybeans'
" use the patched fonts
let g:airline_powerline_fonts = 1
" disable whitespace detection
let g:airline#extensions#whitespace#enabled = 0

" disable syntastic active check by default
let g:syntastic_mode_map = {"mode": "passive"}

" disable arrows
"let g:airline_left_sep = ''
"let g:airline_left_alt_sep = ''
"let g:airline_right_sep = ''
"let g:airline_right_alt_sep = ''

" bubble text up and down with ctrl-up and down
nnoremap <C-Down> :m .+1<CR>==
nnoremap <C-Up> :m .-2<CR>==
inoremap <C-Down> <Esc>:m .+1<CR>==gi
inoremap <C-Up> <Esc>:m .-2<CR>==gi
vnoremap <C-Down> :m '>+1<CR>gv=gv
vnoremap <C-Up> :m '<-2<CR>gv=gv

" map bashing j and k in random order to ESC
inoremap jk <esc>
inoremap kj <esc>

" map ctrl-tab to buffer next
nmap <c-tab> :bn<CR>
nmap <c-s-tab> :bp<CR>

" map ctrl-x to buffer delete
nnoremap <c-x> :bd<CR>

" map Ctrl-K Ctrl-O to toggle .h/.cpp file (same as Visual Studio)
map <c-k><c-o> :e %:p:s,.h$,.X123X,:s,.cpp$,.h,:s,.X123X$,.cpp,<CR>

" ctrl-p configuration
let g:ctrlp_working_path_mode = 0
let g:ctrlp_map = '<leader>f'
let g:ctrlp_match_func = { 'match': 'pymatcher#PyMatch' }
let g:ctrlp_user_command = 'ag %s -i --nocolor --nogroup --hidden
      \ --ignore .git
      \ --ignore .svn
      \ --ignore tags
      \ --ignore cscope.out
      \ --ignore "**/*.pyc"
      \ -g ""'

" quick pairs
imap <leader>' ''<ESC>i
imap <leader>" ""<ESC>i
imap <leader>( ()<ESC>i
imap <leader>[ []<ESC>i

" enable using ctrl-numpad+ for incrementing since ctrl-a is remapped to
" select all on Windows
noremap <C-kPlus> <C-A>

" center after search
"nmap n nzz
"nmap N Nzz

" map leader-w to ctrl-w
nnoremap <leader>w <c-w>

" show whitespaces when calling set list
set listchars=tab:>\ ,eol:¬,extends:>,precedes:<

" set tab and indent configuration based on file type
if has("autocmd")
    "enable file type detection
    filetype on

    "syntax of makefile is fussy over tabs vs spaces
    autocmd FileType make       setlocal ts=8 sts=8 sw=8 noexpandtab
    autocmd FileType html       setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType css        setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType xml        setlocal ts=4 sts=4 sw=4 noexpandtab
    autocmd FileType c          setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType cpp        setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType python     setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType javascript setlocal ts=4 sts=4 sw=4 expandtab
    autocmd FileType vim        setlocal ts=4 sts=4 sw=4 expandtab

    " Treat the files with the following extentions as xml
    autocmd BufNewFile,BufRead *.rss,*.ndb,*.2db,*.config setfiletype xml
endif

" replace tabs with 4 spaces
set tabstop=4 softtabstop=4 shiftwidth=4 expandtab


" enable line numbers
set number

" enable relative line numbers
set relativenumber

" use the jellybeans color scheme
colorscheme jellybeans

" don't create the ~filename files
set nobackup

" turn off highlighted search by default, turn on only when needed.
set nohlsearch

" turn on incremental search (search as character are entered)
set incsearch

" redraw only when we need to
set lazyredraw

" briefly hightligh matching [{()}]
set showmatch

" turn on virtual edit so we can navigate beyond the valid text
"set virtualedit=all

" turn on the wildmenu
set wildmenu

" disable line wrap
set nowrap

" enable cursorline
set cul

" reasonable folding
set foldenable
set foldlevelstart=10
set foldnestmax=10
nnoremap <space> za
"set foldmethod=indent
set foldmethod=marker

" highlight last inserted text
nnoremap gV `[v`]

" gui only options
if has('gui_running')
  set guioptions=
  set guioptions+=r
"   set guioptions-=T " remove tool bar
"  set guioptions-=m " remove menu bar
"  set guioptions-=r " remove right-hand scroll bar
"  set guioptions-=l " remove right-hand scroll bar
"  set guioptions-=b " remove bottom scroll bar
"  set lines=63
"  set columns=239
  set lines=40
  set columns=170
  set encoding=utf-8
  scriptencoding=utf-8
  set guifont=Powerline_Consolas:h11:cANSI
  "set guifont=Inconsolata_for_Powerline_Medium:h11:cANSI
  "set guifont=Consolas:h11:cANSI
  set linespace=0
endif

" disable startup screen
set shortmess=I
